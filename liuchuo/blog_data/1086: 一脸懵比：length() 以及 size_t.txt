<p><strong>刚刚刷 leetcode 的时候又发生了一件灵异事件：</strong></p><p><img class="alignnone size-full wp-image-1087" src="http://www.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_20.png" alt="Snip20160420_20" width="1708" height="672" srcset="https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_20.png 1708w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_20-300x118.png 300w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_20-768x302.png 768w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_20-1024x403.png 1024w" sizes="(max-width: 1708px) 100vw, 1708px"></p><p>//题目很简单：</p><p>Implement strStr().</p><p>Returns the index of the first occurrence of needle in haystack, or -1 if needle is not part of haystack.</p><p>但是报错了：</p><p><img class="alignnone size-full wp-image-1088" src="http://www.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_21.png" alt="Snip20160420_21" width="1382" height="474" srcset="https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_21.png 1382w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_21-300x103.png 300w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_21-768x263.png 768w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_21-1024x351.png 1024w" sizes="(max-width: 1382px) 100vw, 1382px"></p><p>奇怪点不在这，在于如果我把 两个.length()替换成<em><strong> int 型</strong></em>的len1和 len2，就 Accepted了。。</p><p>就是写成这样就对了：</p><p><img class="alignnone size-full wp-image-1089" src="http://www.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_22.png" alt="Snip20160420_22" width="1570" height="662" srcset="https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_22.png 1570w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_22-300x126.png 300w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_22-768x324.png 768w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_22-1024x432.png 1024w" sizes="(max-width: 1570px) 100vw, 1570px"></p><p>啊，为什么。。。为什么。。什么都没干啊只是等价替换了啊。。</p><p><img class="alignnone size-full wp-image-1090" src="http://www.liuchuo.net/wp-content/uploads/2016/04/a82aa4a836975b078e8d_size71_w440_h774.jpg" alt="a82aa4a836975b078e8d_size71_w440_h774" width="440" height="774" srcset="https://cdn1.liuchuo.net/wp-content/uploads/2016/04/a82aa4a836975b078e8d_size71_w440_h774.jpg 440w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/a82aa4a836975b078e8d_size71_w440_h774-171x300.jpg 171w" sizes="(max-width: 440px) 100vw, 440px"></p><p>后来机智的我想起，原来在 IDE 里面编程的时候，每次用 .length()会有<strong>警告</strong>提醒：</p><p><img class="alignnone size-full wp-image-1091" src="http://www.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_26.png" alt="Snip20160420_26" width="1038" height="160" srcset="https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_26.png 1038w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_26-300x46.png 300w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_26-768x118.png 768w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_26-1024x158.png 1024w" sizes="(max-width: 1038px) 100vw, 1038px"></p><p>size_type。。。</p><p><img class="alignnone size-full wp-image-1092" src="http://www.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_29.png" alt="Snip20160420_29" width="1514" height="516" srcset="https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_29.png 1514w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_29-300x102.png 300w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_29-768x262.png 768w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_29-1024x349.png 1024w" sizes="(max-width: 1514px) 100vw, 1514px"></p><p>所以说在 unsigned 情况下，如果两个 length()相减，得到的是一个好大好大的值，因为unsingned和unsigned相减得到unsigned的数，也就是如果是负数的话得到的是int的最大值那样的数，但是在转为 int 型之后就会允许相减得到<em><strong>负数</strong></em>，是这样的么。。。验证一下：</p><p><img class="alignnone size-full wp-image-1093" src="http://www.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_32.png" alt="Snip20160420_32" width="694" height="456" srcset="https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_32.png 694w, https://cdn1.liuchuo.net/wp-content/uploads/2016/04/Snip20160420_32-300x197.png 300w" sizes="(max-width: 694px) 100vw, 694px"></p><p>啊，我怎么可以这么机智~~(｀･ω･´)</p><p><img class="alignnone size-full wp-image-1094" src="http://www.liuchuo.net/wp-content/uploads/2016/04/746-160311154339.jpg" alt="746-160311154339" width="197" height="188">~~~~~~~~~~~~</p><p> </p>