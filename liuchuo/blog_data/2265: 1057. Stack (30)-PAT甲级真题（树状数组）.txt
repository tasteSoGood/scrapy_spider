<p><span style="color: #33cccc;"><strong>Stack is one of the most fundamental data structures, which is based on the principle of Last In First Out (LIFO). The basic operations include Push (inserting an element onto the top position) and Pop (deleting the top element). Now you are supposed to implement a stack with an extra operation: PeekMedian — return the median value of all the elements in the stack. With N elements, the median value is defined to be the (N/2)-th smallest element if N is even, or ((N+1)/2)-th if N is odd.</strong></span></p><p><span style="color: #33cccc;"><strong>Input Specification:</strong></span></p><p><span style="color: #33cccc;"><strong>Each input file contains one test case. For each case, the first line contains a positive integer N (&lt;= 105). Then N lines follow, each contains a command in one of the following 3 formats:</strong></span></p><p><span style="color: #33cccc;"><strong>Push key</strong></span><br><span style="color: #33cccc;"><strong>Pop</strong></span><br><span style="color: #33cccc;"><strong>PeekMedian</strong></span><br><span style="color: #33cccc;"><strong>where key is a positive integer no more than 105.</strong></span></p><p><span style="color: #33cccc;"><strong>Output Specification:</strong></span></p><p><span style="color: #33cccc;"><strong>For each Push command, insert key into the stack and output nothing. For each Pop or PeekMedian command, print in a line the corresponding returned value. If the command is invalid, print “Invalid” instead.</strong></span></p><p><span style="color: #33cccc;"><strong>Sample Input:</strong></span><br><span style="color: #33cccc;"><strong>17</strong></span><br><span style="color: #33cccc;"><strong>Pop</strong></span><br><span style="color: #33cccc;"><strong>PeekMedian</strong></span><br><span style="color: #33cccc;"><strong>Push 3</strong></span><br><span style="color: #33cccc;"><strong>PeekMedian</strong></span><br><span style="color: #33cccc;"><strong>Push 2</strong></span><br><span style="color: #33cccc;"><strong>PeekMedian</strong></span><br><span style="color: #33cccc;"><strong>Push 1</strong></span><br><span style="color: #33cccc;"><strong>PeekMedian</strong></span><br><span style="color: #33cccc;"><strong>Pop</strong></span><br><span style="color: #33cccc;"><strong>Pop</strong></span><br><span style="color: #33cccc;"><strong>Push 5</strong></span><br><span style="color: #33cccc;"><strong>Push 4</strong></span><br><span style="color: #33cccc;"><strong>PeekMedian</strong></span><br><span style="color: #33cccc;"><strong>Pop</strong></span><br><span style="color: #33cccc;"><strong>Pop</strong></span><br><span style="color: #33cccc;"><strong>Pop</strong></span><br><span style="color: #33cccc;"><strong>Pop</strong></span><br><span style="color: #33cccc;"><strong>Sample Output:</strong></span><br><span style="color: #33cccc;"><strong>Invalid</strong></span><br><span style="color: #33cccc;"><strong>Invalid</strong></span><br><span style="color: #33cccc;"><strong>3</strong></span><br><span style="color: #33cccc;"><strong>2</strong></span><br><span style="color: #33cccc;"><strong>2</strong></span><br><span style="color: #33cccc;"><strong>1</strong></span><br><span style="color: #33cccc;"><strong>2</strong></span><br><span style="color: #33cccc;"><strong>4</strong></span><br><span style="color: #33cccc;"><strong>4</strong></span><br><span style="color: #33cccc;"><strong>5</strong></span><br><span style="color: #33cccc;"><strong>3</strong></span><br><span style="color: #33cccc;"><strong>Invalid</strong></span></p><p><span style="color: #99cc00;"><strong>题目大意：现请你实现一种特殊的堆栈，它多了一种操作叫“查中值”，即返回堆栈中所有元素的中值。对于N个元素，若N是偶数，则中值定义为第N/2个最小元；若N是奇数，则中值定义为第(N+1)/2个最小元。</strong></span><br><span style="color: #ff9900;"><strong>分析：用排序查询的方法会超时～～用树状数组，即求第k = (s.size() + 1) / 2大的数。查询小于等于x的数的个数是否等于k的时候用二分法更快～</strong></span></p><p> </p>